---
/**
 * ErrorPage - Reusable error page layout for HTTP error states
 *
 * Features:
 * - Autaxo-ready defaults (German labels), but fully configurable
 * - Optional slots:
 *   - default slot: additional body content below the message
 *   - actions slot: replace default buttons with custom actions
 */
import { siteConfig } from '@/config';

interface Props {
  /** HTTP error code displayed prominently */
  code: number;
  /** Error title/headline */
  title: string;
  /** Descriptive error message */
  message: string;

  /** Optional small kicker above the code (e.g. "Autaxo Systemmeldung") */
  kicker?: string;
  /** Optional hint line below the message (short + actionable) */
  hint?: string;

  /** Show "Go to Homepage" button */
  showHomeButton?: boolean;
  /** Show "Contact Support" button */
  showContactButton?: boolean;

  /** Hrefs + labels (override depending on your routing) */
  homeHref?: string;
  contactHref?: string;
  homeLabel?: string;
  contactLabel?: string;
}

const {
  code,
  title,
  message,
  kicker,
  hint,
  showHomeButton = true,
  showContactButton = true,
  homeHref = '/',
  contactHref = '/contact',
  homeLabel = 'Zur Startseite',
  contactLabel = 'Support kontaktieren',
} = Astro.props;

const hasDefaultSlot = Astro.slots.has('default');
const hasActionsSlot = Astro.slots.has('actions');
---

<main class="container mx-auto px-6">
  <section class="mx-auto max-w-xl text-center py-10 sm:py-14">
    <!-- Brand -->
    <div class="inline-flex items-center gap-2 mb-10">
      {
        siteConfig.logo ? (
          <img
            src={siteConfig.logo}
            alt={siteConfig.name}
            class="h-8 w-auto"
            loading="eager"
            decoding="async"
          />
        ) : (
          <span class="font-semibold text-xl text-text">{siteConfig.name}</span>
        )
      }
    </div>

    {kicker && (
      <p class="text-sm font-medium tracking-wide uppercase text-text-muted mb-3">
        {kicker}
      </p>
    )}

    <!-- Error Code -->
    <p class="text-7xl sm:text-8xl font-bold text-primary mb-4" aria-label={`Fehlercode ${code}`}>
      {code}
    </p>

    <!-- Title -->
    <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-text mb-4">
      {title}
    </h1>

    <!-- Message -->
    <p class="text-base sm:text-lg text-text-muted leading-relaxed mb-6">
      {message}
    </p>

    {hint && (
      <p class="text-sm text-text-muted/90 mb-6">
        {hint}
      </p>
    )}

    <!-- Optional extra body content -->
    {hasDefaultSlot && (
      <div class="mt-2 text-left sm:text-center">
        <slot />
      </div>
    )}

    <!-- Actions -->
    <div class="mt-8">
      {hasActionsSlot ? (
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <slot name="actions" />
        </div>
      ) : (
        (showHomeButton || showContactButton) && (
          <div class="flex flex-col sm:flex-row gap-3 justify-center">
            {showHomeButton && (
              <a
                href={homeHref}
                class="inline-flex items-center justify-center px-6 py-3 bg-primary text-white font-medium rounded-md transition-opacity hover:opacity-90 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40"
              >
                {homeLabel}
              </a>
            )}
            {showContactButton && (
              <a
                href={contactHref}
                class="inline-flex items-center justify-center px-6 py-3 border border-border text-text font-medium rounded-md transition-colors hover:bg-surface focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/25"
              >
                {contactLabel}
              </a>
            )}
          </div>
        )
      )}
    </div>
  </section>
</main>

---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import { Icon } from 'astro-icon/components';

// Metadaten für diese spezielle Seite
const title = "Autaxo | Dealer-Management-System für §25a, EU & Export";
const description = "Die Autohandel-Software mit KI. Digitale Fahrzeugakte, automatische Steuerlogik (§25a/Reverse-Charge) und DATEV-Export. Jetzt kostenlos testen.";
---

<MarketingLayout title={title} description={description}>
  
  <section class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
    <div class="container mx-auto px-4 relative z-10 text-center">
      
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs font-bold uppercase tracking-wider mb-6">
        <span class="relative flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
        </span>
        Neu: KI-Assistent Carlo
      </div>

      <h1 class="text-5xl lg:text-7xl font-extrabold tracking-tight text-white mb-6 text-balance">
        Autohändler Software für <br />
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-red-400">§25a, EU & Export</span>
      </h1>

      <p class="text-xl text-text-muted max-w-2xl mx-auto mb-10 text-balance leading-relaxed">
        Von der FIN zum Vertrag in 60 Sekunden. Digitale Fahrzeugakte, rechtssichere Rechnungen und 
        automatische Steuerlogik – unterstützt durch künstliche Intelligenz.
      </p>

      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a href="https://garage.autaxo.de/auth/sign-up" class="w-full sm:w-auto px-8 py-4 bg-primary hover:bg-primary-hover text-white font-bold rounded-lg transition-all transform hover:-translate-y-1 shadow-lg shadow-primary/25">
          Kostenlos testen
        </a>
        <a href="https://calendar.google.com/calendar/appointments/schedules/AcZssZ0-xc9C7ft1ZGEy3HpR6hP8NyrHXyM_ikIgv0KEUx9tSnzjZGoQ1RNyF4X5WMjk0o4vg6A9ksjD?gv=true&mode=week" target="_blank" class="w-full sm:w-auto px-8 py-4 bg-surface border border-border hover:border-primary/50 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2">
          <Icon name="lucide:calendar" class="w-5 h-5" />
          Demo buchen
        </a>
      </div>

      <div class="mt-16 pt-8 border-t border-white/5 flex flex-wrap justify-center gap-8 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
        <span class="flex items-center gap-2 text-sm font-medium"><Icon name="lucide:shield-check" class="w-5 h-5" /> GoBD zertifiziert</span>
        <span class="flex items-center gap-2 text-sm font-medium"><Icon name="lucide:lock" class="w-5 h-5" /> DSGVO konform</span>
        <span class="flex items-center gap-2 text-sm font-medium"><Icon name="lucide:server" class="w-5 h-5" /> Hosted in Germany</span>
        <span class="flex items-center gap-2 text-sm font-medium"><Icon name="lucide:file-check" class="w-5 h-5" /> DATEV kompatibel</span>
      </div>
    </div>
  </section>

  <section class="py-24 bg-surface border-y border-border">
    <div class="container mx-auto px-4">
      <div class="grid lg:grid-cols-2 gap-16 items-center">
        <div>
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6">
            Carlo beantwortet deine <br />
            <span class="text-primary">Händlerfragen zu Steuern.</span>
          </h2>
          <p class="text-lg text-text-muted mb-6 leading-relaxed">
            Während du dein Geschäft führst, prüft <strong>KI-Assistent Carlo</strong> im Hintergrund die Steuerlogik. 
            Egal ob Differenzbesteuerung, innergemeinschaftliche Lieferung oder Drittlands-Export – Carlo weiß Bescheid.
          </p>
          <ul class="space-y-4 mb-8">
            <li class="flex items-start gap-3">
              <div class="mt-1 p-1 rounded-full bg-primary/20 text-primary"><Icon name="lucide:check" class="w-4 h-4" /></div>
              <span class="text-text-muted">Automatische Erkennung des Steuerfalls (§25a vs. Regel)</span>
            </li>
            <li class="flex items-start gap-3">
              <div class="mt-1 p-1 rounded-full bg-primary/20 text-primary"><Icon name="lucide:check" class="w-4 h-4" /></div>
              <span class="text-text-muted">Live-Prüfung von USt-IDs via VIES Schnittstelle</span>
            </li>
            <li class="flex items-start gap-3">
              <div class="mt-1 p-1 rounded-full bg-primary/20 text-primary"><Icon name="lucide:check" class="w-4 h-4" /></div>
              <span class="text-text-muted">Erinnerung an Gelangensbestätigungen & Nachweise</span>
            </li>
          </ul>
        </div>
        
        <div class="relative group">
          <div class="absolute -inset-1 bg-gradient-to-r from-primary to-purple-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000"></div>
          
          <div class="relative bg-[#0b0c10] border border-border rounded-2xl p-6 shadow-2xl overflow-hidden h-full min-h-[320px] flex flex-col justify-center">
            
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary/0 via-primary/50 to-primary/0"></div>
            <div class="absolute bottom-4 right-4 text-xs font-mono text-white/20">AI CORE: ONLINE</div>

            <div class="space-y-6 w-full max-w-sm mx-auto font-sans text-sm relative z-10">
              <div class="flex gap-3 animate-fade-in-up" style="animation-delay: 0.5s; opacity: 0; animation-fill-mode: forwards;">
                <div class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center shrink-0 border border-white/10">
                  <span class="text-xs font-bold text-white">DU</span>
                </div>
                <div class="bg-surface border border-border p-3 rounded-2xl rounded-tl-none text-text-muted shadow-sm">
                  <p>Habe einen X5 aus Italien gekauft. Netto. Was muss ich beachten?</p>
                </div>
              </div>

              <div class="flex gap-3 animate-fade-out" style="animation-delay: 2.5s; animation-fill-mode: forwards;">
                <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0 border border-primary/30">
                  <Icon name="lucide:bot" class="w-4 h-4 text-primary" />
                </div>
                <div class="flex items-center gap-1 h-8">
                  <span class="w-1.5 h-1.5 bg-primary/50 rounded-full animate-bounce"></span>
                  <span class="w-1.5 h-1.5 bg-primary/50 rounded-full animate-bounce delay-75"></span>
                  <span class="w-1.5 h-1.5 bg-primary/50 rounded-full animate-bounce delay-150"></span>
                </div>
              </div>

              <div class="flex gap-3 animate-fade-in-up" style="animation-delay: 2.8s; opacity: 0; animation-fill-mode: forwards;">
                <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center shrink-0 shadow-lg shadow-primary/20">
                  <Icon name="lucide:bot" class="w-4 h-4 text-white" />
                </div>
                <div class="bg-primary/10 border border-primary/20 p-4 rounded-2xl rounded-tl-none text-white shadow-sm relative overflow-hidden">
                  <div class="absolute inset-0 bg-gradient-to-br from-primary/10 to-transparent pointer-events-none"></div>
                  <p class="mb-2 font-medium">Das ist ein innergemeinschaftlicher Erwerb.</p>
                  <ul class="list-disc list-inside text-primary-200 text-xs space-y-1 opacity-90">
                    <li>USt-IdNr. des Verkäufers prüfen (VIES)</li>
                    <li>Rechnung ohne ausländische MwSt verbuchen</li>
                    <li>Erwerbsteuer in DE abführen & ziehen</li>
                  </ul>
                  <div class="mt-3 flex items-center gap-2 text-[10px] text-primary-300 border-t border-primary/20 pt-2">
                    <Icon name="lucide:check-circle" class="w-3 h-3" />
                    <span>Automatisch für Voranmeldung vorgemerkt.</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>
      </div>
    </div>
  </section>

  <section class="py-24">
    <div class="container mx-auto px-4">
      <div class="text-center max-w-3xl mx-auto mb-16">
        <h2 class="text-3xl lg:text-4xl font-bold text-white mb-4">Entwickelt für den modernen Handel</h2>
        <p class="text-text-muted text-lg">Schluss mit Excel-Listen und Papierchaos. Autaxo zentralisiert dein gesamtes Geschäft.</p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="p-8 rounded-2xl bg-surface border border-border hover:border-primary/50 transition-colors group">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-primary group-hover:text-white transition-colors text-primary">
            <Icon name="lucide:zap" class="w-6 h-6" />
          </div>
          <h3 class="text-xl font-bold text-white mb-3">Schneller verkaufen</h3>
          <p class="text-text-muted leading-relaxed">
            Fahrzeugschein scannen oder FIN eingeben – Autaxo zieht alle Stammdaten automatisch. Inserate für mobile.de werden direkt aus der Akte erstellt.
          </p>
        </div>

        <div class="p-8 rounded-2xl bg-surface border border-border hover:border-primary/50 transition-colors group">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-primary group-hover:text-white transition-colors text-primary">
            <Icon name="lucide:calculator" class="w-6 h-6" />
          </div>
          <h3 class="text-xl font-bold text-white mb-3">Umsatzsteuer im Griff</h3>
          <p class="text-text-muted leading-relaxed">
            Keine Angst vor der Betriebsprüfung. Autaxo erkennt Steuerfälle automatisch und setzt die richtigen Hinweise auf Rechnungen (z.B. "Steuerfrei gem. §4 Nr. 1b").
          </p>
        </div>

        <div class="p-8 rounded-2xl bg-surface border border-border hover:border-primary/50 transition-colors group">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-primary group-hover:text-white transition-colors text-primary">
            <Icon name="lucide:files" class="w-6 h-6" />
          </div>
          <h3 class="text-xl font-bold text-white mb-3">Nie wieder Zettelchaos</h3>
          <p class="text-text-muted leading-relaxed">
            Digitale Fahrzeugakte statt Leitz-Ordner. Alle Dokumente (EK-Rechnung, VK-Rechnung, Ausweis) sind revisionssicher am Fahrzeug gespeichert.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section id="roadmap" class="py-24 bg-[#0b0c10] relative overflow-hidden">
    
    <div class="container mx-auto px-4 relative z-10">
      <div class="text-center mb-20">
        <span class="text-primary font-bold tracking-wider uppercase text-sm mb-2 block">Der Workflow</span>
        <h2 class="text-3xl lg:text-5xl font-extrabold text-white mb-6">
          Von <span class="text-primary">FIN</span> zum Vertrag in <span class="text-primary">60 Sekunden</span>
        </h2>
        <p class="text-text-muted text-lg max-w-2xl mx-auto">
          Kein Papierkram mehr. Carlo KI führt dich gezielt durch den Prozess – inkl. automatischer Steuerlogik. 
          Klicke auf die Schritte, um es live zu sehen.
        </p>
      </div>

      <div class="relative max-w-4xl mx-auto">
        <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary/0 via-primary/50 to-primary/0 md:-translate-x-1/2"></div>

        <div class="timeline-item relative z-10 mb-16 opacity-0 translate-y-8 transition-all duration-700 ease-out">
          <div class="flex flex-col md:flex-row items-center gap-8 group cursor-pointer" onclick="openModal('modal-1')">
            
            <div class="w-full md:w-1/2 md:text-right order-2 md:order-1 pl-12 md:pl-0 md:pr-12">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-primary transition-colors">1. FIN-Abfrage & Scan</h3>
              <p class="text-text-muted text-sm leading-relaxed">
                Fahrzeugschein scannen oder tippen. Autaxo zieht Hersteller, Modell und Erstzulassung automatisch.
                <br><span class="text-primary text-xs font-bold mt-2 inline-block">▶ Video ansehen</span>
              </p>
            </div>
            
            <div class="absolute left-0 md:left-1/2 md:-translate-x-1/2 w-9 h-9 rounded-full bg-[#0b0c10] border-2 border-primary flex items-center justify-center text-white font-bold text-sm shadow-[0_0_15px_rgba(179,0,24,0.4)] group-hover:scale-110 transition-transform z-20">1</div>
            
            <div class="hidden md:block w-1/2 order-3"></div>
          </div>
        </div>

        <div class="timeline-item relative z-10 mb-16 opacity-0 translate-y-8 transition-all duration-700 ease-out delay-100">
          <div class="flex flex-col md:flex-row items-center gap-8 group cursor-pointer" onclick="openModal('modal-2')">
            <div class="hidden md:block w-1/2 order-1"></div>
            
            <div class="absolute left-0 md:left-1/2 md:-translate-x-1/2 w-9 h-9 rounded-full bg-[#0b0c10] border-2 border-border group-hover:border-primary flex items-center justify-center text-text-muted font-bold text-sm transition-colors z-20">2</div>
            
            <div class="w-full md:w-1/2 order-2 pl-12">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-primary transition-colors">2. Ankauf & Steuer-Check</h3>
              <p class="text-text-muted text-sm leading-relaxed">
                Verkäufer erfassen. Bei B2B prüft Carlo die USt-ID live und entscheidet: §25a, Regelbesteuerung oder steuerfrei?
                <br><span class="text-primary text-xs font-bold mt-2 inline-block">▶ Video ansehen</span>
              </p>
            </div>
          </div>
        </div>

        <div class="timeline-item relative z-10 mb-16 opacity-0 translate-y-8 transition-all duration-700 ease-out delay-200">
          <div class="flex flex-col md:flex-row items-center gap-8 group cursor-pointer" onclick="openModal('modal-3')">
            <div class="w-full md:w-1/2 md:text-right order-2 md:order-1 pl-12 md:pl-0 md:pr-12">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-primary transition-colors">3. Inserat & Verkauf</h3>
              <p class="text-text-muted text-sm leading-relaxed">
                Mit einem Klick Inserate für mobile.de generieren. Bei Verkauf werden Verträge automatisch erstellt.
                <br><span class="text-primary text-xs font-bold mt-2 inline-block">▶ Video ansehen</span>
              </p>
            </div>
            <div class="absolute left-0 md:left-1/2 md:-translate-x-1/2 w-9 h-9 rounded-full bg-[#0b0c10] border-2 border-border group-hover:border-primary flex items-center justify-center text-text-muted font-bold text-sm transition-colors z-20">3</div>
            <div class="hidden md:block w-1/2 order-3"></div>
          </div>
        </div>

        <div class="timeline-item relative z-10 mb-16 opacity-0 translate-y-8 transition-all duration-700 ease-out delay-300">
          <div class="flex flex-col md:flex-row items-center gap-8 group cursor-pointer" onclick="openModal('modal-4')">
            <div class="hidden md:block w-1/2 order-1"></div>
            <div class="absolute left-0 md:left-1/2 md:-translate-x-1/2 w-9 h-9 rounded-full bg-[#0b0c10] border-2 border-border group-hover:border-primary flex items-center justify-center text-text-muted font-bold text-sm transition-colors z-20">4</div>
            <div class="w-full md:w-1/2 order-2 pl-12">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-primary transition-colors">4. Dokumentation & DATEV</h3>
              <p class="text-text-muted text-sm leading-relaxed">
                Gelangensbestätigung vergessen? Nicht mit uns. Carlo erinnert dich. Am Monatsende: 1-Klick DATEV Export.
                <br><span class="text-primary text-xs font-bold mt-2 inline-block">▶ Video ansehen</span>
              </p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <dialog id="modal-1" class="bg-transparent p-0 w-full max-w-4xl backdrop:bg-black/80 backdrop:backdrop-blur-sm rounded-2xl shadow-2xl border border-white/10 m-auto">
    <div class="bg-[#15171e] rounded-2xl overflow-hidden relative">
      <button onclick="closeModal('modal-1')" class="absolute top-4 right-4 z-50 p-2 bg-black/50 hover:bg-primary text-white rounded-full transition-colors"><Icon name="lucide:x" class="w-6 h-6" /></button>
      <div class="grid md:grid-cols-2">
        <div class="bg-black flex items-center justify-center aspect-video md:aspect-auto">
          <video controls class="w-full h-full object-cover">
              <source src="https://storage.googleapis.com/autaxo-website/GIFs%20for%20Website%20(1).mp4" type="video/mp4">
          </video>
        </div>
        <div class="p-8 flex flex-col justify-center">
          <h3 class="text-2xl font-bold text-white mb-4">Scannen statt Tippen.</h3>
          <p class="text-text-muted mb-6">
            Erfassen Sie ein Fahrzeug in unter 60 Sekunden. Einfach den Fahrzeugschein scannen – Autaxo liest die FIN automatisch aus, fragt die Stammdaten ab (Hersteller, Modell, EZ) und legt das Fahrzeug fehlerfrei an.
          </p>
          <button onclick="closeModal('modal-1')" class="self-start px-6 py-2 border border-white/20 hover:bg-white/10 text-white rounded-lg transition-colors">Schließen</button>
        </div>
      </div>
    </div>
  </dialog>

  <dialog id="modal-2" class="bg-transparent p-0 w-full max-w-4xl backdrop:bg-black/80 backdrop:backdrop-blur-sm rounded-2xl shadow-2xl border border-white/10 m-auto">
    <div class="bg-[#15171e] rounded-2xl overflow-hidden relative">
      <button onclick="closeModal('modal-2')" class="absolute top-4 right-4 z-50 p-2 bg-black/50 hover:bg-primary text-white rounded-full transition-colors"><Icon name="lucide:x" class="w-6 h-6" /></button>
      <div class="grid md:grid-cols-2">
        <div class="bg-black flex items-center justify-center aspect-video md:aspect-auto">
          <video controls class="w-full h-full object-cover">
              <source src="https://storage.googleapis.com/autaxo-website/GIFs%20for%20Website%20(2).mp4" type="video/mp4">
          </video>
        </div>
        <div class="p-8 flex flex-col justify-center">
          <h3 class="text-2xl font-bold text-white mb-4">Den Kauf korrekt erfassen.</h3>
          <p class="text-text-muted mb-6">
            Egal ob von Privat oder Unternehmen – bei EU-Geschäften wird die USt-IdNr. automatisch geprüft. Alle Dokumente sind sofort revisionssicher gespeichert.
          </p>
          <button onclick="closeModal('modal-2')" class="self-start px-6 py-2 border border-white/20 hover:bg-white/10 text-white rounded-lg transition-colors">Schließen</button>
        </div>
      </div>
    </div>
  </dialog>

  <dialog id="modal-3" class="bg-transparent p-0 w-full max-w-4xl backdrop:bg-black/80 backdrop:backdrop-blur-sm rounded-2xl shadow-2xl border border-white/10 m-auto">
    <div class="bg-[#15171e] rounded-2xl overflow-hidden relative">
      <button onclick="closeModal('modal-3')" class="absolute top-4 right-4 z-50 p-2 bg-black/50 hover:bg-primary text-white rounded-full transition-colors"><Icon name="lucide:x" class="w-6 h-6" /></button>
      <div class="grid md:grid-cols-2">
        <div class="bg-black flex items-center justify-center aspect-video md:aspect-auto">
          <img src="https://storage.googleapis.com/autaxo-website/Homepage/Roadmap%20html%20block/Inserat%20Erstellen%20fu%CC%88r%20homepage%20(roadmap).png" class="w-full h-full object-contain" />
        </div>
        <div class="p-8 flex flex-col justify-center">
          <h3 class="text-2xl font-bold text-white mb-4">Schneller inserieren.</h3>
          <p class="text-text-muted mb-6">
            Erstellen Sie mit einem Klick Verkaufsanzeigen auf mobile.de. Nach dem Verkauf wird das Inserat automatisch deaktiviert.
          </p>
          <button onclick="closeModal('modal-3')" class="self-start px-6 py-2 border border-white/20 hover:bg-white/10 text-white rounded-lg transition-colors">Schließen</button>
        </div>
      </div>
    </div>
  </dialog>

  <dialog id="modal-4" class="bg-transparent p-0 w-full max-w-4xl backdrop:bg-black/80 backdrop:backdrop-blur-sm rounded-2xl shadow-2xl border border-white/10 m-auto">
    <div class="bg-[#15171e] rounded-2xl overflow-hidden relative">
      <button onclick="closeModal('modal-4')" class="absolute top-4 right-4 z-50 p-2 bg-black/50 hover:bg-primary text-white rounded-full transition-colors"><Icon name="lucide:x" class="w-6 h-6" /></button>
      <div class="grid md:grid-cols-2">
        <div class="bg-black flex items-center justify-center aspect-video md:aspect-auto">
           <video controls class="w-full h-full object-cover">
              <source src="https://storage.googleapis.com/autaxo-website/GIFs%20for%20Website(8).mp4" type="video/mp4">
          </video>
        </div>
        <div class="p-8 flex flex-col justify-center">
          <h3 class="text-2xl font-bold text-white mb-4">Perfekt für den Steuerberater.</h3>
          <p class="text-text-muted mb-6">
            Am Monatsende exportieren Sie alle Buchungssätze mit einem Klick im DATEV-Format. Kein Sortieren von Belegen mehr.
          </p>
          <button onclick="closeModal('modal-4')" class="self-start px-6 py-2 border border-white/20 hover:bg-white/10 text-white rounded-lg transition-colors">Schließen</button>
        </div>
      </div>
    </div>
  </dialog>

  <section class="py-24 text-center">
    <div class="container mx-auto px-4 max-w-4xl">
      <h2 class="text-4xl lg:text-5xl font-bold text-white mb-8">Bereit für die Zukunft des Handels?</h2>
      <p class="text-xl text-text-muted mb-10 max-w-2xl mx-auto">
        Starte jetzt durch. Keine Kreditkarte erforderlich. In 2 Minuten eingerichtet.
      </p>
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a href="https://garage.autaxo.de/auth/sign-up" class="w-full sm:w-auto px-8 py-4 bg-primary hover:bg-primary-hover text-white font-bold rounded-lg transition-all text-lg shadow-xl shadow-primary/20">
          Jetzt kostenlos testen
        </a>
      </div>
      <p class="mt-6 text-sm text-text-muted">
        30 Tage kostenlos testen • Jederzeit kündbar • Made in Germany
      </p>
    </div>
  </section>

</MarketingLayout>

<style>
  /* Chat Animation */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeOut {
    0% { opacity: 1; display: flex; }
    99% { opacity: 0; display: flex; }
    100% { opacity: 0; display: none; width: 0; height: 0; margin: 0; }
  }
  .animate-fade-in-up {
    animation-name: fadeInUp;
    animation-duration: 0.5s;
    animation-timing-function: ease-out;
  }
  .animate-fade-out {
    animation-name: fadeOut;
    animation-duration: 0.3s;
  }
</style>

<script is:inline>
  // 1. Scroll Animation für Timeline (Fade In beim Scrollen)
  document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.remove('opacity-0', 'translate-y-8');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });

    document.querySelectorAll('.timeline-item').forEach(item => {
      observer.observe(item);
    });
  });

  // 2. Modal Logic (Öffnen/Schließen + Video Steuerung)
  function openModal(id) {
    const modal = document.getElementById(id);
    if (modal) {
      modal.showModal();
      // Automatisch abspielen wenn geöffnet
      const video = modal.querySelector('video');
      if(video) video.play();
    }
  }

  function closeModal(id) {
    const modal = document.getElementById(id);
    if (modal) {
      modal.close();
      // Video stoppen beim Schließen
      const video = modal.querySelector('video');
      if(video) video.pause();
    }
  }

  // Schließen beim Klick auf den Hintergrund (Backdrop)
  document.querySelectorAll('dialog').forEach(dialog => {
    dialog.addEventListener('click', (e) => {
      const rect = dialog.getBoundingClientRect();
      const isInDialog = (rect.top <= e.clientY && e.clientY <= rect.top + rect.height &&
        rect.left <= e.clientX && e.clientX <= rect.left + rect.width);
      if (!isInDialog) {
        dialog.close();
        const video = dialog.querySelector('video');
        if(video) video.pause();
      }
    });
  });
</script>